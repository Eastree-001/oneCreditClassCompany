# EduNexus企业端 - API接口文档

## 基础信息

- **基础URL**: `https://api.edunexus.com/enterprise`
- **API版本**: `v1`
- **数据格式**: JSON
- **字符编码**: UTF-8

## 认证方式

所有接口（除登录、注册外）需要在请求头中携带Token：

```
Authorization: Bearer {token}
```

---

## 1. 认证模块

### 1.1 企业登录

**接口地址**: `POST /api/auth/login`

**请求参数**:
```json
{
  "username": "string",  // 用户名或邮箱
  "password": "string"    // 密码
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expires_in": 7200,
    "enterprise": {
      "id": 1,
      "company_name": "示例企业",
      "username": "demo",
      "email": "demo@example.com"
    }
  }
}
```

---

### 1.2 企业注册

**接口地址**: `POST /api/auth/register`

**请求参数**:
```json
{
  "company_name": "string",  // 企业名称
  "username": "string",       // 用户名（3-20个字符）
  "email": "string",         // 企业邮箱
  "phone": "string",         // 联系电话（11位手机号）
  "password": "string"       // 密码（至少8位）
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "注册成功",
  "data": {
    "id": 1,
    "company_name": "示例企业",
    "username": "demo"
  }
}
```

---

### 1.3 退出登录

**接口地址**: `POST /api/auth/logout`

**响应示例**:
```json
{
  "code": 200,
  "message": "退出成功"
}
```

---

## 2. 数据看板模块

### 2.1 获取统计数据

**接口地址**: `GET /api/dashboard/stats`

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "profile_count": 24,      // 岗位画像数
    "match_count": 156,        // 课程匹配数
    "project_count": 12,       // 合作项目数
    "plan_count": 8            // 培训课程数
  }
}
```

---

### 2.2 获取课程匹配趋势

**接口地址**: `GET /api/dashboard/match-trend`

**请求参数**:
- `period` (string, 可选): 时间周期，month-按月，week-按周，默认month
- `months` (int, 可选): 查询月数，默认6

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "labels": ["1月", "2月", "3月", "4月", "5月", "6月"],
    "values": [120, 132, 101, 134, 90, 156]
  }
}
```

---

### 2.3 获取岗位画像分布

**接口地址**: `GET /api/dashboard/profile-distribution`

**响应示例**:
```json
{
  "code": 200,
  "data": [
    { "name": "前端工程师", "value": 8 },
    { "name": "AI算法工程师", "value": 6 },
    { "name": "数据安全分析师", "value": 5 },
    { "name": "AIGC内容设计师", "value": 3 },
    { "name": "其他", "value": 2 }
  ]
}
```

---

### 2.4 获取培训课程完成情况

**接口地址**: `GET /api/dashboard/training-status`

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "completed": 5,
    "ongoing": 2,
    "pending": 1
  }
}
```

---

### 2.5 获取合作高校统计

**接口地址**: `GET /api/dashboard/cooperation-stats`

**响应示例**:
```json
{
  "code": 200,
  "data": [
    { "school": "清华大学", "count": 3 },
    { "school": "北京大学", "count": 2 },
    { "school": "复旦大学", "count": 2 },
    { "school": "上海交大", "count": 3 },
    { "school": "浙江大学", "count": 2 }
  ]
}
```

---

### 2.6 获取最近活动

**接口地址**: `GET /api/dashboard/activities`

**请求参数**:
- `page` (int, 可选): 页码，默认1
- `size` (int, 可选): 每页数量，默认10

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "title": "新增岗位画像：前端工程师",
        "content": "已上传前端工程师技能画像，包含React、Supabase、n8n等技能要求",
        "time": "2024-01-15 10:30"
      }
    ],
    "total": 10
  }
}
```

---

## 3. 岗位技能画像模块

### 3.1 获取岗位画像列表

**接口地址**: `GET /api/skill-profiles`

**请求参数**:
- `keyword` (string, 可选): 岗位名称关键词
- `type` (string, 可选): 岗位类型：tech, design, product, operation
- `page` (int, 可选): 页码，默认1
- `size` (int, 可选): 每页数量，默认10

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "name": "前端工程师",
        "type": "tech",
        "description": "负责公司前端产品开发，需要掌握现代前端技术栈",
        "skills": ["React", "Supabase", "n8n", "TypeScript", "Vue.js"],
        "experience": "1-3年",
        "education": "bachelor",
        "match_count": 12,
        "create_time": "2024-01-10 10:30:00"
      }
    ],
    "total": 24,
    "page": 1,
    "size": 10
  }
}
```

---

### 3.2 获取岗位画像详情

**接口地址**: `GET /api/skill-profiles/{id}`

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "id": 1,
    "name": "前端工程师",
    "type": "tech",
    "description": "负责公司前端产品开发，需要掌握现代前端技术栈",
    "skills": ["React", "Supabase", "n8n", "TypeScript", "Vue.js"],
    "experience": "1-3年",
    "education": "bachelor",
    "match_count": 12,
    "create_time": "2024-01-10 10:30:00",
    "update_time": "2024-01-10 10:30:00"
  }
}
```

---

### 3.3 创建岗位画像

**接口地址**: `POST /api/skill-profiles`

**请求参数**:
```json
{
  "name": "string",           // 岗位名称，必填
  "type": "string",            // 岗位类型，必填
  "description": "string",    // 岗位描述，必填
  "skills": ["string"],       // 技能列表，必填，至少一个
  "experience": "string",     // 经验要求，可选
  "education": "string"       // 学历要求，可选
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 1
  }
}
```

---

### 3.4 更新岗位画像

**接口地址**: `PUT /api/skill-profiles/{id}`

**请求参数**: 同创建接口

**响应示例**:
```json
{
  "code": 200,
  "message": "更新成功"
}
```

---

### 3.5 删除岗位画像

**接口地址**: `DELETE /api/skill-profiles/{id}`

**响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 4. 课程匹配模块

### 4.1 获取岗位画像列表（用于选择）

**接口地址**: `GET /api/course-match/profiles`

**响应示例**:
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "前端工程师",
      "type": "tech",
      "skills": ["React", "Supabase", "n8n", "TypeScript", "Vue.js"]
    }
  ]
}
```

---

### 4.2 获取匹配结果

**接口地址**: `GET /api/course-match/results`

**请求参数**:
- `profile_id` (int, 必填): 岗位画像ID
- `sort` (string, 可选): 排序方式，match-按匹配度，name-按课程名称，默认match

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "profile": {
      "id": 1,
      "name": "前端工程师",
      "type": "tech",
      "skills": ["React", "Supabase", "n8n", "TypeScript", "Vue.js"]
    },
    "matches": [
      {
        "id": 1,
        "course_id": 1,
        "course_name": "React 前端开发实战",
        "school": "清华大学",
        "teacher": "张教授",
        "duration": 32,
        "description": "全面讲解React框架，包括Hooks、状态管理、路由等核心概念",
        "match_score": 95,
        "matched_skills": ["React", "TypeScript"]
      }
    ],
    "stats": {
      "total": 5,
      "high_match": 3,    // 匹配度>=90
      "medium_match": 2    // 匹配度80-89
    }
  }
}
```

---

### 4.3 刷新匹配结果

**接口地址**: `POST /api/course-match/refresh`

**请求参数**:
```json
{
  "profile_id": 1
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "匹配完成",
  "data": {
    "match_count": 5
  }
}
```

---

### 4.4 获取匹配度分析

**接口地址**: `GET /api/course-match/analysis`

**请求参数**:
- `profile_id` (int, 必填): 岗位画像ID

**响应示例**:
```json
{
  "code": 200,
  "data": [
    { "name": "React 前端开发实战", "value": 95 },
    { "name": "TypeScript 高级编程", "value": 90 },
    { "name": "现代Web开发技术栈", "value": 88 }
  ]
}
```

---

### 4.5 获取优化建议

**接口地址**: `GET /api/course-match/suggestions`

**请求参数**:
- `profile_id` (int, 必填): 岗位画像ID

**响应示例**:
```json
{
  "code": 200,
  "data": [
    {
      "type": "技能完善",
      "title": "建议补充相关技能",
      "content": "当前岗位画像已匹配到5门课程。建议补充以下技能以提升匹配度：Node.js、Git版本控制。",
      "actions": [
        { "label": "编辑画像", "action": "edit", "url": "/skill-profile?id=1" }
      ]
    }
  ]
}
```

---

## 5. 人才需求发布模块

### 5.1 获取人才需求列表

**接口地址**: `GET /api/talent-demands`

**请求参数**:
- `keyword` (string, 可选): 需求标题关键词
- `status` (string, 可选): 状态：pending, published, closed
- `page` (int, 可选): 页码，默认1
- `size` (int, 可选): 每页数量，默认10

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "title": "招聘前端工程师",
        "position": "前端工程师",
        "count": 5,
        "location": "北京",
        "skills": ["React", "Vue.js", "TypeScript"],
        "education": "bachelor",
        "salary": "15k-25k",
        "schools": ["清华大学", "北京大学"],
        "applicants": 23,
        "status": "published",
        "create_time": "2024-01-10 10:30:00",
        "deadline": "2024-02-28"
      }
    ],
    "total": 10,
    "page": 1,
    "size": 10
  }
}
```

---

### 5.2 获取人才需求详情

**接口地址**: `GET /api/talent-demands/{id}`

**响应示例**: 同列表项结构

---

### 5.3 发布人才需求

**接口地址**: `POST /api/talent-demands`

**请求参数**:
```json
{
  "title": "string",          // 需求标题，必填
  "position": "string",       // 岗位名称，必填
  "count": 1,                 // 需求人数，必填
  "location": "string",       // 工作地点，必填
  "description": "string",    // 岗位描述，必填
  "skills": ["string"],      // 技能要求，可选
  "education": "string",     // 学历要求，可选
  "salary": "string",        // 薪资范围，可选
  "schools": ["string"],    // 合作高校，可选
  "deadline": "string"       // 截止日期，可选，格式：YYYY-MM-DD
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "发布成功，等待审核",
  "data": {
    "id": 1
  }
}
```

---

### 5.4 更新人才需求

**接口地址**: `PUT /api/talent-demands/{id}`

**请求参数**: 同发布接口（所有字段可选）

**响应示例**:
```json
{
  "code": 200,
  "message": "更新成功"
}
```

---

### 5.5 关闭人才需求

**接口地址**: `PUT /api/talent-demands/{id}/close`

**响应示例**:
```json
{
  "code": 200,
  "message": "已关闭"
}
```

---

### 5.6 删除人才需求

**接口地址**: `DELETE /api/talent-demands/{id}`

**响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 6. 合作项目管理模块

### 6.1 获取合作项目列表

**接口地址**: `GET /api/cooperation-projects`

**请求参数**:
- `keyword` (string, 可选): 项目名称关键词
- `school` (string, 可选): 合作高校
- `status` (string, 可选): 项目状态：ongoing, completed, paused
- `page` (int, 可选): 页码，默认1
- `size` (int, 可选): 每页数量，默认10

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "name": "前端工程师人才培养计划",
        "school": "清华大学",
        "type": "talent",
        "status": "ongoing",
        "students": 25,
        "progress": 65,
        "description": "与清华大学计算机系合作，培养前端工程师人才",
        "start_time": "2024-01-01",
        "end_time": "2024-06-30",
        "goals": "培养25名前端工程师，掌握React、Vue.js等技能",
        "contact": "张经理",
        "phone": "13800138000"
      }
    ],
    "total": 12,
    "page": 1,
    "size": 10
  }
}
```

---

### 6.2 获取合作项目详情

**接口地址**: `GET /api/cooperation-projects/{id}`

**响应示例**: 同列表项结构

---

### 6.3 创建合作项目

**接口地址**: `POST /api/cooperation-projects`

**请求参数**:
```json
{
  "name": "string",           // 项目名称，必填
  "school": "string",        // 合作高校，必填
  "type": "string",          // 项目类型，必填：talent, course, internship, research
  "students": 10,            // 预计参与学生数，必填
  "description": "string",   // 项目描述，必填
  "goals": "string",        // 项目目标，可选
  "start_time": "string",    // 开始时间，必填，格式：YYYY-MM-DD
  "end_time": "string",      // 结束时间，必填，格式：YYYY-MM-DD
  "contact": "string",      // 联系人，可选
  "phone": "string"         // 联系电话，可选
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 1
  }
}
```

---

### 6.4 更新合作项目

**接口地址**: `PUT /api/cooperation-projects/{id}`

**请求参数**: 同创建接口（所有字段可选）

**响应示例**:
```json
{
  "code": 200,
  "message": "更新成功"
}
```

---

### 6.5 更新项目进度

**接口地址**: `PUT /api/cooperation-projects/{id}/progress`

**请求参数**:
```json
{
  "progress": 65  // 进度（0-100）
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "更新成功"
}
```

---

### 6.6 删除合作项目

**接口地址**: `DELETE /api/cooperation-projects/{id}`

**响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 7. 培训课程管理模块

### 7.1 获取培训课程列表

**接口地址**: `GET /api/training-plans`

**请求参数**:
- `keyword` (string, 可选): 计划名称关键词
- `status` (string, 可选): 计划状态：pending, ongoing, completed
- `page` (int, 可选): 页码，默认1
- `size` (int, 可选): 每页数量，默认10

**响应示例**:
```json
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": 1,
        "name": "新员工前端技能培训",
        "type": "onboarding",
        "status": "ongoing",
        "participants": 15,
        "duration": "2周",
        "description": "为新入职的前端工程师提供技能培训",
        "courses": [
          {
            "id": 1,
            "name": "React 前端开发实战",
            "school": "清华大学",
            "teacher": "张教授",
            "duration": 32
          }
        ],
        "progress": 65,
        "start_time": "2024-01-10",
        "end_time": "2024-01-24"
      }
    ],
    "total": 8,
    "page": 1,
    "size": 10
  }
}
```

---

### 7.2 获取培训课程详情

**接口地址**: `GET /api/training-plans/{id}`

**响应示例**: 同列表项结构

---

### 7.3 获取可选课程列表

**接口地址**: `GET /api/training-plans/available-courses`

**请求参数**:
- `keyword` (string, 可选): 课程名称关键词

**响应示例**:
```json
{
  "code": 200,
  "data": [
    {
      "id": 1,
      "name": "React 前端开发实战",
      "school": "清华大学",
      "teacher": "张教授",
      "duration": 32
    }
  ]
}
```

---

### 7.4 创建培训课程

**接口地址**: `POST /api/training-plans`

**请求参数**:
```json
{
  "name": "string",           // 计划名称，必填
  "type": "string",          // 计划类型，必填：onboarding, skill, position
  "participants": 10,        // 参与人数，必填
  "duration": "string",      // 培训周期，必填
  "description": "string",    // 计划描述，必填
  "courses": [1, 2],         // 课程ID列表，必填，至少一个
  "start_time": "string",   // 开始时间，必填，格式：YYYY-MM-DD
  "end_time": "string"       // 结束时间，必填，格式：YYYY-MM-DD
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "创建成功",
  "data": {
    "id": 1
  }
}
```

---

### 7.5 更新培训课程

**接口地址**: `PUT /api/training-plans/{id}`

**请求参数**: 同创建接口（所有字段可选）

**响应示例**:
```json
{
  "code": 200,
  "message": "更新成功"
}
```

---

### 7.6 更新培训进度

**接口地址**: `PUT /api/training-plans/{id}/progress`

**请求参数**:
```json
{
  "progress": 65  // 进度（0-100）
}
```

**响应示例**:
```json
{
  "code": 200,
  "message": "更新成功"
}
```

---

### 7.7 删除培训课程

**接口地址**: `DELETE /api/training-plans/{id}`

**响应示例**:
```json
{
  "code": 200,
  "message": "删除成功"
}
```

---

## 8. 通用接口

### 8.1 获取高校列表

**接口地址**: `GET /api/common/schools`

**响应示例**:
```json
{
  "code": 200,
  "data": [
    { "value": "tsinghua", "label": "清华大学" },
    { "value": "pku", "label": "北京大学" },
    { "value": "fudan", "label": "复旦大学" },
    { "value": "sjtu", "label": "上海交通大学" },
    { "value": "zju", "label": "浙江大学" }
  ]
}
```

---

## 错误码说明

| 错误码 | 说明 |
|--------|------|
| 200 | 请求成功 |
| 400 | 请求参数错误 |
| 401 | 未授权，需要登录 |
| 403 | 无权限访问 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

---

## 响应格式说明

所有接口统一返回格式：

```json
{
  "code": 200,
  "message": "操作成功",
  "data": {}
}
```

**错误响应示例**:
```json
{
  "code": 400,
  "message": "请求参数错误",
  "errors": {
    "username": ["用户名不能为空"],
    "password": ["密码长度至少8位"]
  }
}
```

